@using Microsoft.AspNetCore.Authorization
@using System.Security.Claims
@using TargetBrowse.Features.Topics.Models
@using TargetBrowse.Features.Topics.Services

@attribute [Authorize]

@rendermode InteractiveServer

<div class="card">
    <div class="card-header">
        <h5 class="card-title mb-0">
            Add A New Topic
        </h5>
    </div>
    <div class="card-body">
        <EditForm Model="@TopicModel" OnValidSubmit="@HandleValidSubmit">
            <DataAnnotationsValidator />

            <div class="mb-3">
                <div class="input-group">
                    <InputText @bind-Value="TopicModel.Name"
                               class="form-control"
                               id="topicName"
                               placeholder="Enter topic name (e.g., Machine Learning, Web Development)"
                               disabled="@IsSubmitting" />
                    <button type="submit"
                            class="btn btn-primary"
                            disabled="@IsSubmitting">
                        @if (IsSubmitting)
                        {
                            <span class="spinner-border spinner-border-sm me-2" role="status" aria-hidden="true"></span>
                        }
                        Add Topic
                    </button>
                </div>
                <ValidationMessage For="@(() => TopicModel.Name)" class="text-danger" />
                <div class="form-text">
                    This will add a Topic to your list and add videos to your suggestions. If you don't want the topic added and just want to search YouTube to add individual vidoes to your library use <a href="video-search">Search Videos</a>.
                </div>
            </div>
        </EditForm>
    </div>
</div>