@page "/Account/Manage/ScriptProfile"
@using Microsoft.AspNetCore.Authorization
@using TargetBrowse.Features.Projects.Models
@using TargetBrowse.Features.Projects.Services
@attribute [Authorize]

<PageTitle>Script Profile</PageTitle>

<h3>Script Profile</h3>

<StatusMessage Message="@_message" />

<div class="row">
    <div class="col-md-8">
        <p class="text-muted">
            Configure how AI generates video scripts for you. These preferences will be applied to all script generations.
        </p>

        @if (_isLoading)
        {
            <div class="text-center py-3">
                <div class="spinner-border text-primary" role="status">
                    <span class="visually-hidden">Loading...</span>
                </div>
            </div>
        }
        else
        {
            <EditForm Model="ProfileModel" OnValidSubmit="HandleSaveProfile" FormName="scriptProfile">
                <DataAnnotationsValidator />

                <div class="mb-3">
                    <label for="tone" class="form-label">Script Tone</label>
                    <InputSelect @bind-Value="ProfileModel.Tone" class="form-select" id="tone">
                        <option value="Casual">Casual - Friendly and conversational</option>
                        <option value="Professional">Professional - Formal and polished</option>
                        <option value="Enthusiastic">Enthusiastic - Energetic and exciting</option>
                        <option value="Technical">Technical - Precise and detailed</option>
                    </InputSelect>
                    <ValidationMessage For="@(() => ProfileModel.Tone)" class="text-danger" />
                    <div class="form-text">
                        The overall voice and style of your scripts.
                    </div>
                </div>

                <div class="mb-3">
                    <label for="pacing" class="form-label">Script Pacing</label>
                    <InputSelect @bind-Value="ProfileModel.Pacing" class="form-select" id="pacing">
                        <option value="Fast">Fast - Quick and concise</option>
                        <option value="Moderate">Moderate - Balanced pace</option>
                        <option value="Deliberate">Deliberate - Slow and thorough</option>
                    </InputSelect>
                    <ValidationMessage For="@(() => ProfileModel.Pacing)" class="text-danger" />
                    <div class="form-text">
                        How quickly information is presented.
                    </div>
                </div>

                <div class="mb-3">
                    <label for="complexity" class="form-label">Complexity Level</label>
                    <InputSelect @bind-Value="ProfileModel.Complexity" class="form-select" id="complexity">
                        <option value="Beginner">Beginner - Simple explanations</option>
                        <option value="Intermediate">Intermediate - Balanced detail</option>
                        <option value="Advanced">Advanced - Technical depth</option>
                    </InputSelect>
                    <ValidationMessage For="@(() => ProfileModel.Complexity)" class="text-danger" />
                    <div class="form-text">
                        The technical level of your target audience.
                    </div>
                </div>

                <div class="mb-3">
                    <label for="customInstructions" class="form-label">Custom Instructions (Optional)</label>
                    <InputTextArea @bind-Value="ProfileModel.CustomInstructions"
                                   class="form-control"
                                   id="customInstructions"
                                   rows="4"
                                   placeholder="e.g., 'Always use analogies', 'Include real-world examples', 'Avoid jargon'" />
                    <ValidationMessage For="@(() => ProfileModel.CustomInstructions)" class="text-danger" />
                    <div class="form-text">
                        Additional instructions for script generation (max 2000 characters).
                    </div>
                </div>

                <div class="mb-3">
                    <button type="submit" class="btn btn-primary" disabled="@_isSaving">
                        @if (_isSaving)
                        {
                            <span class="spinner-border spinner-border-sm me-2" role="status"></span>
                            <span>Saving...</span>
                        }
                        else
                        {
                            <span>Save Profile</span>
                        }
                    </button>
                </div>
            </EditForm>
        }
    </div>

    <div class="col-md-4">
        <div class="card">
            <div class="card-header">
                <h5 class="card-title mb-0">Profile Tips</h5>
            </div>
            <div class="card-body">
                <h6>Tone Examples:</h6>
                <ul class="small">
                    <li><strong>Casual:</strong> "Let's dive into..."</li>
                    <li><strong>Professional:</strong> "In this tutorial, we will examine..."</li>
                    <li><strong>Enthusiastic:</strong> "This is so cool! Let me show you..."</li>
                    <li><strong>Technical:</strong> "We'll implement the observer pattern..."</li>
                </ul>

                <h6 class="mt-3">Custom Instructions Ideas:</h6>
                <ul class="small">
                    <li>"Always include practical examples"</li>
                    <li>"Use analogies to explain complex concepts"</li>
                    <li>"Keep sentences short and simple"</li>
                    <li>"Include common mistakes to avoid"</li>
                    <li>"End each section with a key takeaway"</li>
                </ul>
            </div>
        </div>
    </div>
</div>
